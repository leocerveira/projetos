{
  "hash": "b43c7c8a0478658a8d14554c39ca60ea",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"PNADc - Renda\"\nformat:\n  html:\n    toc: true\n    number-sections: true\n---\n\n\n\n\n\n# Análises de Renda no Brasil pela PNAD Contínua Anual (2022-2024)\n\n## Código\n\n### Pacotes Utilizados\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(list(\"survey\", \"tidyverse\", \"PNADcIBGE\", \"future\", \"future.apply\", \"progressr\", \"data.table\", \"patchwork\", \"kableExtra\"), function(x) {library(x, character.only = TRUE)})\n```\n:::\n\n\n\n\n\n\n\n### Variáveis\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvariaveis <- c(\"Ano\", \"UF\", \"V1008\", \"V1014\", \"V1023\", \"V1032\", \n               \"V2001\", \"V2003\", \"V2005\", \"V2007\", \"V20081\", \"V2009\", \"V2010\", \n               \"VD3004\", \"VD3005\", \n               \"V4009\", \"V4039\", \"V4040\", \"V40401\", \"V40402\", \"V40403\", \"VD4008\", \"VD4013\", \"VD4019\", \"VD4031\", \n               \"VD5010\") \n```\n:::\n\n\n\n\n\n### Funções\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncarregar_dados <- function(ano) {\n  get_pnadc(year = ano, interview = 1, vars = variaveis, defyear = 2024)\n}\n\ncalcula_media <- function(design) {\n  design <- subset(design, cor_raça != \"Ignorado\")\n  \n  design <- update(design, \n                   Renda_dom = rendimento_habitual_domicilio * CO2,\n                   Renda = rendimento_habitual * CO2) \n  \n  renda_ano <- svyby(\n    formula = ~Renda,\n    by = ~interaction(sexo, cor_raça),  \n    design = design,\n    FUN = svymean,\n    na.rm = TRUE\n  )\n  \n  renda_ano <- renda_ano %>%\n    rename(Categoria = `interaction(sexo, cor_raça)`) %>%\n    mutate(Categoria = as.character(Categoria))\n  \n  renda_media <- svymean(x = ~Renda, design = design, na.rm = TRUE)\n  \n  renda_geral <- data.frame(\"Geral\", coef(renda_media), SE(renda_media))\n  colnames(renda_geral) <- colnames(renda_ano)  # garante consistência\n  \n  renda_ano <- rbind(renda_ano, renda_geral)\n  rownames(renda_ano) <- NULL\n  gc()\n  return(renda_ano)\n}\n\ncalcula_quartil <- function(dados) {\n  dado <- dados\n  dado <- subset(dado, !is.na(rendimento_habitual) & !is.na(sexo) & cor_raça != \"Ignorado\")\n  \n  dado <- transform(\n    dado,\n    Renda = rendimento_habitual * CO2, \n    Renda_dom = rendimento_habitual_domicilio * CO2, \n    Categoria = interaction(sexo, cor_raça)\n  )\n  \n  quartis <- svyby(\n    ~Renda,                      \n    ~Categoria,                      \n    dado,                       \n    FUN = svyquantile,            \n    quantiles = c(0.25, 0.5, 0.75)\n  )\n  \n  dado_df <- as.data.frame(dado$variables)\n  dado_df <- left_join(dado_df, quartis, by = \"Categoria\")\n  \n  quartil_geral <- svyquantile(\n    x = ~Renda, \n    design = dado, \n    quantiles = c(0.25, 0.5, 0.75), \n    ci = FALSE\n  )\n  quartil_geral <- as.data.frame(quartil_geral[[\"Renda\"]])\n  \n  renda_media <- svymean(~Renda, dado) \n  \n  dado_df <- dado_df %>%\n    select(Categoria, Renda, Renda.0.25, Renda.0.5, Renda.0.75) %>%\n    mutate(Categoria = as.character(Categoria))\n  \n  media_geral <- data.frame(\n    Categoria = \"Geral\",\n    Renda = as.numeric(renda_media[\"Renda\"]),\n    Renda.0.25 = as.numeric(quartil_geral[1]),\n    Renda.0.5 = as.numeric(quartil_geral[2]),\n    Renda.0.75 = as.numeric(quartil_geral[3]),\n    Quartil = case_when(\n      as.numeric(renda_media[\"Renda\"]) <= as.numeric(quartil_geral[1]) ~ \"Q4\",\n      as.numeric(renda_media[\"Renda\"]) <= as.numeric(quartil_geral[2]) ~ \"Q3\",\n      as.numeric(renda_media[\"Renda\"]) <= as.numeric(quartil_geral[3]) ~ \"Q2\",\n      TRUE ~ \"Q1\"\n    )\n  )\n  \n  dado_df$Categoria <- factor(dado_df$Categoria)\n  \n  dado_df <- dado_df %>%\n    mutate(\n      Quartil = case_when(\n        Renda <= Renda.0.25 ~ \"Q4\",            \n        Renda <= Renda.0.5  ~ \"Q3\",            \n        Renda <= Renda.0.75 ~ \"Q2\",            \n        TRUE                ~ \"Q1\"\n      )\n    )\n  \n  dado_df <- full_join(dado_df, media_geral)\n  \n  dado_df$Renda <- as.numeric(dado_df$Renda)\n  \n  resultado <- dado_df %>%\n    group_by(Categoria, Quartil) %>% \n    summarize(Media_Renda = mean(Renda)) %>%\n    mutate(Quartil_Geral = case_when(\n      Media_Renda <= as.numeric(quartil_geral[1]) ~ \"q4\",            \n      Media_Renda <= as.numeric(quartil_geral[2]) ~ \"q3\",            \n      Media_Renda <= as.numeric(quartil_geral[3]) ~ \"q2\",            \n      TRUE ~ \"q1\"\n    ))\n  \n  return(resultado)\n}\n\n# Função para reordenar categorias condicionalmente após pivot_wider\npivot_reorder <- function(data, ano, variavel, categoria, valor, vars_to_reorder, decrescente = TRUE) {\n  \n  ultimo_ano <- as.character(max(as.numeric(pull(data, {{ano}})), na.rm = TRUE))\n  var_levels <- data %>% pull({{variavel}}) %>% unique()\n  \n  data %>%\n    mutate(\n      {{categoria}} := as.character({{categoria}})\n    ) %>%\n    pivot_wider(\n      names_from = {{ano}},\n      values_from = {{valor}}\n    ) %>%\n    group_by({{variavel}}) %>%\n    mutate(\n      {{categoria}} := if (first({{variavel}}) %in% vars_to_reorder) {\n        fct_reorder(\n          .data[[as.character(rlang::ensym(categoria))]],\n          as.numeric(.data[[ultimo_ano]]),\n          .desc = decrescente\n        )\n      } else {\n        factor(\n          .data[[as.character(rlang::ensym(categoria))]],\n          levels = unique(.data[[as.character(rlang::ensym(categoria))]])\n        )\n      }\n    ) %>%\n    ungroup() %>%\n    arrange(\n      factor(.data[[as.character(rlang::ensym(variavel))]], levels = var_levels),\n      .data[[as.character(rlang::ensym(categoria))]]\n    )\n}\n```\n:::\n\n\n\n\n\n\n\n\n\n## Gráficos\n\n\n\n\n\n\n\n\n\n\n\n### Análise Racial e de Gênero\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](pnad_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](pnad_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### Renda Média dos Quartis por Categoria de Cor e Sexo\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](pnad_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Tabela Descritiva\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Características Socioeconômicas do Brasil (Porcentagens)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;font-weight: bold;\">  </th>\n   <th style=\"text-align:center;font-weight: bold;\"> 2022 </th>\n   <th style=\"text-align:center;font-weight: bold;\"> 2023 </th>\n   <th style=\"text-align:center;font-weight: bold;\"> 2024 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"5\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Cor ou Raça</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Branca </td>\n   <td style=\"text-align:center;\"> 42.80 </td>\n   <td style=\"text-align:center;\"> 42.37 </td>\n   <td style=\"text-align:center;\"> 42.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Preta </td>\n   <td style=\"text-align:center;\"> 10.59 </td>\n   <td style=\"text-align:center;\"> 10.59 </td>\n   <td style=\"text-align:center;\"> 10.72 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Amarela </td>\n   <td style=\"text-align:center;\"> 0.81 </td>\n   <td style=\"text-align:center;\"> 0.70 </td>\n   <td style=\"text-align:center;\"> 0.64 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Parda </td>\n   <td style=\"text-align:center;\"> 45.35 </td>\n   <td style=\"text-align:center;\"> 45.88 </td>\n   <td style=\"text-align:center;\"> 46.15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Indígena </td>\n   <td style=\"text-align:center;\"> 0.44 </td>\n   <td style=\"text-align:center;\"> 0.46 </td>\n   <td style=\"text-align:center;\"> 0.48 </td>\n  </tr>\n  <tr grouplength=\"7\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Nível de Instrução</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Sem instrução e menos de 1 ano de estudo </td>\n   <td style=\"text-align:center;\"> 7.93 </td>\n   <td style=\"text-align:center;\"> 7.69 </td>\n   <td style=\"text-align:center;\"> 7.45 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Fundamental incompleto ou equivalente </td>\n   <td style=\"text-align:center;\"> 32.25 </td>\n   <td style=\"text-align:center;\"> 31.62 </td>\n   <td style=\"text-align:center;\"> 30.97 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Fundamental completo ou equivalente </td>\n   <td style=\"text-align:center;\"> 7.54 </td>\n   <td style=\"text-align:center;\"> 7.42 </td>\n   <td style=\"text-align:center;\"> 7.27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Médio incompleto ou equivalente </td>\n   <td style=\"text-align:center;\"> 7.25 </td>\n   <td style=\"text-align:center;\"> 7.12 </td>\n   <td style=\"text-align:center;\"> 7.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Médio completo ou equivalente </td>\n   <td style=\"text-align:center;\"> 26.55 </td>\n   <td style=\"text-align:center;\"> 27.26 </td>\n   <td style=\"text-align:center;\"> 27.90 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Superior incompleto ou equivalente </td>\n   <td style=\"text-align:center;\"> 4.44 </td>\n   <td style=\"text-align:center;\"> 4.35 </td>\n   <td style=\"text-align:center;\"> 4.36 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Superior completo </td>\n   <td style=\"text-align:center;\"> 14.04 </td>\n   <td style=\"text-align:center;\"> 14.54 </td>\n   <td style=\"text-align:center;\"> 15.04 </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Número de Trabalhos</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Um </td>\n   <td style=\"text-align:center;\"> 96.51 </td>\n   <td style=\"text-align:center;\"> 96.72 </td>\n   <td style=\"text-align:center;\"> 96.29 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Dois ou mais </td>\n   <td style=\"text-align:center;\"> 3.49 </td>\n   <td style=\"text-align:center;\"> 3.28 </td>\n   <td style=\"text-align:center;\"> 3.71 </td>\n  </tr>\n  <tr grouplength=\"6\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Posição no Trabalho Principal</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Empregado no setor privado </td>\n   <td style=\"text-align:center;\"> 49.96 </td>\n   <td style=\"text-align:center;\"> 50.72 </td>\n   <td style=\"text-align:center;\"> 51.18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Conta-própria </td>\n   <td style=\"text-align:center;\"> 25.92 </td>\n   <td style=\"text-align:center;\"> 25.39 </td>\n   <td style=\"text-align:center;\"> 25.22 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Empregado no setor público </td>\n   <td style=\"text-align:center;\"> 12.08 </td>\n   <td style=\"text-align:center;\"> 12.15 </td>\n   <td style=\"text-align:center;\"> 12.26 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Trabalhador doméstico </td>\n   <td style=\"text-align:center;\"> 5.96 </td>\n   <td style=\"text-align:center;\"> 6.03 </td>\n   <td style=\"text-align:center;\"> 5.78 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Empregador </td>\n   <td style=\"text-align:center;\"> 4.39 </td>\n   <td style=\"text-align:center;\"> 4.29 </td>\n   <td style=\"text-align:center;\"> 4.26 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Trabalhador familiar auxiliar </td>\n   <td style=\"text-align:center;\"> 1.70 </td>\n   <td style=\"text-align:center;\"> 1.42 </td>\n   <td style=\"text-align:center;\"> 1.30 </td>\n  </tr>\n  <tr grouplength=\"5\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Faixa de Horas Trabalhadas</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Até 14 horas </td>\n   <td style=\"text-align:center;\"> 3.78 </td>\n   <td style=\"text-align:center;\"> 3.76 </td>\n   <td style=\"text-align:center;\"> 3.61 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> 15 a 39 horas </td>\n   <td style=\"text-align:center;\"> 20.18 </td>\n   <td style=\"text-align:center;\"> 19.89 </td>\n   <td style=\"text-align:center;\"> 19.77 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> 40 a 44 horas </td>\n   <td style=\"text-align:center;\"> 53.61 </td>\n   <td style=\"text-align:center;\"> 55.38 </td>\n   <td style=\"text-align:center;\"> 55.28 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> 45 a 48 horas </td>\n   <td style=\"text-align:center;\"> 9.67 </td>\n   <td style=\"text-align:center;\"> 9.34 </td>\n   <td style=\"text-align:center;\"> 9.37 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> 49 horas ou mais </td>\n   <td style=\"text-align:center;\"> 12.76 </td>\n   <td style=\"text-align:center;\"> 11.62 </td>\n   <td style=\"text-align:center;\"> 11.96 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Faixa de Renda (R$)</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Até 1500 </td>\n   <td style=\"text-align:center;\"> 47.57 </td>\n   <td style=\"text-align:center;\"> 42.46 </td>\n   <td style=\"text-align:center;\"> 37.22 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> 1501 a 3000 </td>\n   <td style=\"text-align:center;\"> 31.78 </td>\n   <td style=\"text-align:center;\"> 34.90 </td>\n   <td style=\"text-align:center;\"> 36.85 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Acima de 3000 </td>\n   <td style=\"text-align:center;\"> 20.64 </td>\n   <td style=\"text-align:center;\"> 22.65 </td>\n   <td style=\"text-align:center;\"> 25.93 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n\\\n",
    "supporting": [
      "pnad_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}